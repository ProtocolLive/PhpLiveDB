<!DOCTYPE html>
<html>

<head>
  <title>Select::WhereAdd</title>
  <link rel="stylesheet" href="global.css">
</head>

<body>
  <table style="width:95%;margin-left: auto;margin-right: auto;">
    <tr>
      <td style="width:100%; background-color: #F2F2F2; padding: 20px;">
        <div class="maintitle">Select::WhereAdd</div>
        <p>Add a field to filter the search</p>
        <p>&nbsp;</p>
        <div class="title">Sintaxe</div><br>
        <div class="code">
          <span class="type">public</span>
          <span class="object">ProtocolLive\PhpLiveDb\Select</span>::<span class="func">WhereAdd</span><span
            class="type">(</span><br>
          <span class="ident">
            <span class="type">string</span>
            <span class="var">$Field</span>,<br>
          </span>
          <span class="ident">
            <span class="type">string</span>
            <span class="var">$Value</span>
            <span class="type">=</span>
            <span class="const">null</span>,
          </span><br>
          <span class="ident">
            <span class="object">Types</span>
            <span class="var">$Type</span>
            <span class="type">=</span>
            <span class="const">null</span>,
          </span><br>
          <span class="ident">
            <span class="object">Operators</span>
            <span class="var">$Operator</span>
            <span class="type">=</span>
            <span class="object">Operators</span><span class="type">::</span><span class="const">Equal</span>,
          </span><br>
          <span class="ident">
            <span class="object">AndOr</span>
            <span class="var">$AndOr</span>
            <span class="type">=</span>
            <span class="object">AndOr</span><span class="type">::</span><span class="const">And,
            </span>
          </span><br>
          <span class="ident"><span class="object">Parenthesis</span>
            <span class="var">$Parenthesis</span>
            <span class="type">=</span>
            <span class="object">Parenthesis</span><span class="type">::</span><span class="const">None</span>,
          </span><br>
          <span class="ident"><span class="type">string</span>
            <span class="var">$CustomPlaceholder</span>
            <span class="type">=</span>
            <span class="const">null</span>,
          </span><br>
          <span class="ident"><span class="type">bool</span>
            <span class="var">$BlankIsNull</span>
            <span class="type">=</span>
            <span class="const">true</span>,
          </span><br>
          <span class="ident"><span class="type">bool</span>
            <span class="var">$NoField</span>
            <span class="type">=</span>
            <span class="const">false</span>,
          </span><br>
          <span class="ident"><span class="type">bool</span>
            <span class="var">$NoBind</span>
            <span class="type">=</span>
            <span class="const">false</span>,
          </span><br>
          <span class="ident"><span class="type">bool</span>
            <span class="var">$Debug</span>
            <span class="type">=</span>
            <span class="const">false</span>
          </span><br>
          <span class="type">):void</span>
        </div>
        <p>&nbsp;</p>
        <div class="title">Parameters</div>
        <p>
          <a name="field" class="var">$Field</a>
          - The field name;
        </p>
        <p>
          <a name="value" class="var">$Value</a>
          - The field value;
        </p>
        <p>
          <a name="type" class="var">$Type</a>
          - The field type. See more in <a href="types.htm" class="object">Types</a>;
        </p>
        <p>
          <a name="operator" class="var">$Operator</a>
          - The comparing operator. See more in <a href="operators.htm" class="object">Operators</a>;
        </p>
        <p>
          <span class="var">$AndOr</span>
          - The relation with the previous field. See more in <a href="andor.htm" class="object">AndOr</a>;
        </p>
        <p>
          <span class="var">$Parenthesis</span>
          - The parenthesis operator. See more in <a href="parenthesis.htm" class="object">Parenthesis</a>;
        </p>
        <p>
          <a name="custom" class="var">$CustomPlaceholder</a>
          - String to use as placeholder;
        </p>
        <p>
          <span class="var">$BlankIsNull</span>
          - Replace '' to null;
        </p>
        <p>
          <span class="var">$NoField</span>
          - To bind a placeholder previously indicated;
        </p>
        <p>
          <a name="nobind" class="var">$NoBind</a>
          - To add a field without binding;
        </p>
        <p>
          <span class="var">$Debug</span>
          - Dump the command debug;
        </p>
        <p>&nbsp;</p>
        <div class="title">Notes</div>
        <p>
          - When the <a href="#value">$Value</a> is null, the <a href="#type">Type</a> are changed to <span
            class="var">Types::Null</span>;
        </p>
        <p>
          - When the <a href="#operator">$Operator</a> is <span class="var">Operators::Sql</span>, the <a
            href="#nobind">$NoBind</a> are changed to <span class="var">true</span>;
        </p>
        <p>
          - When using a SQL expression in <a href="#field">$Field</a>, its mandatory to use the <a
            href="#custom">$CustomPlaceholder</a>;
        </p>

        <p>&nbsp;</p>
        <div class="title">Examples</div><br>

        Select with one condition:<br>
        <div class="code">
          <span class="var">$consult</span>
          = <span class="var">$Db</span>-><span class="func">Select</span>('<span class="string">users</span>');<br>
          <span class="var">$consult</span>-><span class="func">WhereAdd</span>(<br>
          <span class="ident">
            <span class="string">'email'</span>,
          </span><br>
          <span class="ident">
            $_POST<span class="type">[</span><span class="string">'email'</span><span class="type">]</span>,
          </span><br>
          <span class="ident">
            <span class="object">Types</span><span class="type">::</span><span class="const">Str</span><br>
            );
          </span><br>
          $consult<span class="type">-></span><span class="func">Run</span>();<br>
          <span class="comment">//select * from users where email=:email</span><br>
          <span class="comment">//select * from users where email='foo@bar.com'</span><br>
        </div><br>

        Select with more conditions:<br>
        <div class="code">
          <span class="var">$consult</span>
          = <span class="var">$Db</span>-><span class="func">Select</span>('<span class="string">users</span>');<br>
          <span class="var">$consult</span>-><span class="func">WhereAdd</span>(<br>
          <span class="ident">
            <span class="string">'email'</span>,
          </span><br>
          <span class="ident">
            $_POST<span class="type">[</span><span class="string">'email'</span><span class="type">]</span>,
          </span><br>
          <span class="ident">
            <span class="object">Types</span><span class="type">::</span><span class="const">Str</span>
          </span><br>
          );<br>
          <span class="var">$consult</span>-><span class="func">WhereAdd</span>(<br>
          <span class="ident">
            <span class="string">'active'</span>,
          </span><br>
          <span class="ident">
            <span class="const">1</span>,
          </span><br>
          <span class="ident">
            <span class="object">Types</span><span class="type">::</span><span class="const">Int</span>
          </span><br>
          );<br>
          $consult<span class="type">-></span><span class="func">Run</span>();<br>
          <span class="comment">//select * from users where email=:email and active=:active</span><br>
          <span class="comment">//select * from users where email='foo@bar.com' and active=1</span><br>
        </div><br>

        Select with "Or" and "CustomPlaceholder":<br>
        <div class="code">
          <span class="var">$consult</span>
          = <span class="var">$Db</span>-><span class="func">Select</span>('<span class="string">users</span>');<br>
          <span class="var">$consult</span>
          -><span class="func">WhereAdd</span>(<br>
          <span class="ident">
            <span class="string">'type'</span>,
          </span><br>
          <span class="ident">
            <span class="const">1</span>,
          </span><br>
          <span class="ident">
            <span class="object">Types</span><span class="type">::</span><span class="const">Int</span>
          </span><br>
          );<br>
          <span class="var">$consult</span>-><span class="func">WhereAdd</span>(<br>
          <span class="ident">
            <span class="string">'type'</span>,
          </span><br>
          <span class="ident">
            <span class="const">2</span>,
          </span><br>
          <span class="ident">
            <span class="object">Types</span><span class="type">::</span><span class="const">Int</span>,
          </span><br>
          <span class="ident">
            <span class="argument">AndOr</span>:
            <span class="object">AndOr</span><span class="type">::</span><span class="const">Or</span>,
          </span><br>
          <span class="ident">
            <span class="argument">CustomPlaceholder</span>:
            <span class="string">'type2'</span>
          </span><br>
          );</span><br>
          $consult<span class="type">-></span><span class="func">Run</span>();<br>
          <span class="comment">//select * from users where type=:type or type=:type2</span><br>
          <span class="comment">//select * from users where type=1 or type=2</span><br>
        </div><br>

        Operators, Parenthesis, CustomPlaceholder and NoBind:
        <div class="code">
          <span class="var">$consult</span>
          = <span class="var">$Db</span>-><span class="func">Select</span>('<span class="string">users</span>');<br>

          <span class="var">$consult</span>-><span class="func">WhereAdd</span>(<br>
          <span class="ident">
            <span class="string">'active'</span>,
          </span><br>
          <span class="ident">
            <span class="const">true</span>,
          </span><br>
          <span class="ident">
            <span class="object">Types</span><span class="type">::</span><span class="const">Bool</span>
          </span><br>
          );<br>

          <span class="var">$consult</span>-><span class="func">WhereAdd</span>(<br>
          <span class="ident">
            <span class="string">'name'</span>,
          </span><br>
          <span class="ident">
            <span class="string">'%'</span>
            <span class="type">.</span>
            $_POST<span class="type">[</span><span class="string">'text'</span><span class="type">]</span>
            <span class="type">.</span>
            <span class="string">'%'</span>,
          </span><br>
          <span class="ident">
            <span class="object">Types</span><span class="type">::</span><span class="const">Str</span>,
          </span><br>
          <span class="ident">
            <span class="argument">Operator</span>:
            <span class="object">Operators</span><span class="type">::</span><span class="const">Like</span>,
          </span><br>
          <span class="ident">
            <span class="argument">Parenthesis</span>:
            <span class="object">Parenthesis</span><span class="type">::</span><span class="const">Open</span>,
          </span><br>
          );<br>

          <span class="var">$consult</span>-><span class="func">WhereAdd</span>(<br>
          <span class="ident">
            <span class="string">'email'</span>,
          </span><br>
          <span class="ident">
            <span class="argument">Operator</span>:
            <span class="object">Operators</span><span class="type">::</span><span class="const">Like</span>,
          </span><br>
          <span class="ident">
            <span class="argument">AndOr</span>:
            <span class="object">AndOr</span><span class="type">::</span><span class="const">Or</span>,
          </span><br>
          <span class="ident">
            <span class="argument">Parenthesis</span>:
            <span class="object">Parenthesis</span><span class="type">::</span><span class="const">Close</span>,
          </span><br>
          <span class="ident">
            <span class="argument">CustomPlaceholder</span>:
            <span class="string">'name'</span>,
          </span><br>
          <span class="ident">
            <span class="argument">NoBind</span>:
            <span class="const">true</span>
          </span><br>
          );</span><br>
          $consult<span class="type">-></span><span class="func">Run</span>();<br>
          <span class="comment">//select * from users where active=:active and (name like :name or email like
            :name)</span><br>
          <span class="comment">//select * from users where active=1 and (name like '%foo%' or email like
            '%foo%')</span>
        </div>
        <p>&nbsp;</p>
      </td>
      <td style="color: #ccc; font-size: 18px; vertical-align: top;"><iframe src="menu.htm" class="menu2"></iframe></td>
    </tr>
  </table>
</body>

</html>